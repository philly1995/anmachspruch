<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Cache-Control" content="no-store" />
  <meta http-equiv="Expires" content="0" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ballermann Anmachspruch Generator</title>
  <style>
    body { background-color: #fff0f5; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; text-align: center; padding: 36px 16px; }
    h1 { font-size: 2em; margin-bottom: 16px; }
    h2 { font-size: 1.6em; margin: 0 0 10px 0; }

    /* kompaktere Abst√§nde zwischen Sektionen */
    .section { margin-top: 48px; }
    @media (min-width: 768px) { .section { margin-top: 64px; } }

    .button-container { display: flex; flex-direction: column; align-items: center; gap: 6px; }
    button { padding: 16px 36px; font-size: 1.1em; background-color: #ff69b4; border: none; border-radius: 12px; color: white; cursor: pointer; width: 100%; max-width: 320px; transition: transform 0.2s ease, box-shadow 0.2s ease; }
    button:active { transform: scale(0.96); box-shadow: 0 0 10px #ff69b4aa; }
    button[disabled] { opacity: .65; cursor: not-allowed; }

    /* --- Modal & Animationen (langsam/spannend) --- */
    .modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,.45); display: none; align-items: center; justify-content: center; z-index: 9999; padding: 20px; opacity: 0; }
    .modal { background: #fff; border-radius: 16px; padding: 22px; max-width: 520px; width: 100%; box-shadow: 0 10px 30px rgba(0,0,0,.25); text-align: left; opacity: 0; transform: translateY(28px) scale(0.97); }
    .show { display: flex !important; animation: backdropFadeSlow 900ms ease forwards; }
    .show .modal { animation: popSlow 1200ms ease forwards; }
    .modal h3 { margin: 0 0 10px; font-size: 1.4em; color: #aa007f; }
    .modal p { margin: 0 0 18px; color: #333; line-height: 1.5; }
    .actions { display: flex; justify-content: flex-end; gap: 10px; }
    .actions button { background: #ff69b4; border-radius: 10px; padding: 12px 18px; font-size: 1em; }

    @keyframes backdropFadeSlow { from { opacity: 0; } to { opacity: 1; } }
    @keyframes popSlow { 0% { opacity: 0; transform: translateY(28px) scale(0.97);} 70% { opacity: 1; transform: translateY(-4px) scale(1.02);} 100% { opacity: 1; transform: translateY(0) scale(1);} }

    @media (prefers-reduced-motion: reduce) {
      .show { animation: none; opacity: 1; }
      .show .modal { animation: none; opacity: 1; transform: none; }
    }

    /* alte Inline-Ausgaben sind obsolet */
    #spruch, #shot-output, #truth-output, #loader { display: none; }
  </style>
</head>
<body>
  <h1>Dieser QR-Code war deine beste Entscheidung heute!<br/>Oder auch nicht. Versuch dein Gl√ºck.</h1>

  <!-- Anmachspruch -->
  <div id="spruch-section" class="section button-container">
    <h2>Anmachspruch-Generator</h2>
    <button id="spruch-btn" onclick="zeigSpruch()">Zuf√§lligen Anmachspruch generieren</button>
  </div>

  <!-- Pflicht oder Shot -->
  <div id="truth-section" class="section button-container">
    <h2>Pflicht oder Shot</h2>
    <button id="truth-btn" onclick="zeigAufgabe()">Zeig mir meine Aufgabe</button>
    <div class="small-text" style="font-size: 0.95em; color:#444;">Erf√ºlle die Aufgabe oder trink einen Shot (oder einen gro√üen Schluck deines Getr√§nks). Du wei√üt nicht welchen Shot du trinken willst? Dann lass den Zufall unten entscheiden!</div>
  </div>

  <!-- Shots -->
  <div id="shot-section" class="section button-container">
    <h2>Welcher Shot als n√§chstes?</h2>
    <button id="shot-button" onclick="zeigShot()">Na schauen wir mal was wird</button>
  </div>

  <!-- Minispiel-Bereich -->
<div id="minigame-section" class="section button-container">
  <h2>Minispiel-Bierjagd</h2>
  <button onclick="window.location.href='emoji_dodge_mini_game.html'">üç∫ Bierjagd spielen</button>
</div>

  <!-- G√§stebuch (externer Link wie im Original) -->
  <div id="guestbook-section" class="section button-container">
    <h2>G√§stebuch</h2>
    <button onclick="window.open('https://forms.gle/47Bvs727BKtzxNjv5','_blank')">G√§stebuch √∂ffnen</button>
  </div>

  <!-- Modals -->
  <div id="spruch-backdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="spruch-title" aria-describedby="spruch-text">
    <div class="modal">
      <h3 id="spruch-title">Dein Spruch</h3>
      <p id="spruch-text"></p>
      <div class="actions"><button id="spruch-close" onclick="closeSpruchModal()">Weiter</button></div>
    </div>
  </div>

  <div id="coach-backdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="coach-title" aria-describedby="coach-text">
    <div class="modal">
      <h3 id="coach-title">Zeit f√ºr Mut!</h3>
      <p id="coach-text">Hey, jetzt sprich die Person einfach an ‚Äì so schwer kann das nicht sein!</p>
      <div class="actions"><button id="coach-ok" onclick="closeCoachModal()">Okay, mach ich</button></div>
    </div>
  </div>

  <div id="shot-backdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="shot-title" aria-describedby="shot-text">
    <div class="modal">
      <h3 id="shot-title">Dein Shot</h3>
      <p id="shot-text"></p>
      <div class="actions"><button id="shot-close" onclick="closeShotModal()">Prost!</button></div>
    </div>
  </div>

  <div id="cheat-backdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="cheat-title" aria-describedby="cheat-text">
    <div class="modal">
      <h3 id="cheat-title">Erwischt!</h3>
      <p id="cheat-text">Das ist cheaten! Jetzt musst du ne Runde ausgeben!</p>
      <div class="actions"><button onclick="closeCheatModal()">Ja okay, wieso nicht</button></div>
    </div>
  </div>

  <div id="truth-backdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="truth-title" aria-describedby="truth-text">
    <div class="modal">
      <h3 id="truth-title">Deine Aufgabe</h3>
      <p id="truth-text"></p>
      <div class="actions"><button id="truth-close" onclick="closeTruthModal()">Challenge accepted</button></div>
    </div>
  </div>

  <script>
    // --- Daten ---
    const sprueche = [
      "Ist dein Pullover aus Kamelhaar oder warum hast du so stabile H√∂cker?",
      "Willst du alleinerziehende Mutter werden?",
      "Isst du gerade Kaktuseis oder knistert‚Äôs zwischen uns?",
      "Hast du 2\u202fcm Platz und 15 Sekunden Zeit?",
      "Meiner ist nicht nur besonders klein, sondern auch extra d√ºnn",
      "Hei√üt du Winnie? Weil wenn ich dich sehe denk ich mir Puuh.",
      "Was gibt es hier noch so f√ºr Sehensw√ºrdigkeiten - au√üer dich nat√ºrlich?",
      "Wieso kann ich dich auf Spotify nicht finden? Ich hab doch nach Hottest Singles gesucht.",
      "Eigentlich bin ich ja niemand f√ºr nur eine Nacht aber f√ºr dich mach ich ne Ausnahme.",
      "Ich bin so schlecht im Bett, das muss man erlebt haben, um es zu glauben!",
      "Brauchst du noch einen schlechten Einfluss in deinem Leben?",
      "Ich bin vom ADAC ‚Äì ich bin hier, um dich abzuschleppen.",
      "Du musst der wahre Grund f√ºr die Erderw√§rmung sein.",
      "Glaubst du an Liebe auf den ersten Blick oder soll ich nochmal reinkommen?",
      "Ich bin M√∂belpacker, darf ich dir beim ausziehen helfen?",
      "Du wirst von Tag zu Tag h√ºbscher, heute siehst du schon aus wie n√§chste Woche.",
      "Ich bin gut drauf, bist du gut drunter?",
      "Du siehst zerknittert aus, darf ich mal dr√ºber b√ºgeln?",
      "Ich will gar nicht mit dir ins Bett, das Sofa reicht mir.",
      "Wenn du mit mir rummachen willst, dann l√§chle einfach kurz.",
      "Ich bin Mathematiker und interessiere mich f√ºr mehrstellige Zahlen, gibst du mir deine Telefonnummer?",
      "Bist du Kommunist:in? Wenn ich dich sehe, merke ich wie der Aufstand in meiner Unterschicht losgeht.",
      "Daumenwrestling ist out, ich mach das jetzt immer mit der Zunge. Lust eine Runde gegen mich zu spielen?",
      "Wegen dir habe ich Nackenschmerzen, du hast mir n√§mlich total den Kopf verdreht!",
      "Wenn du ein See voller Wasser w√§rst, w√§rst du eindeutig S√ºsswasser.",
      "Gibt es zuf√§llig eine Doppelg√§ngerin von dir? Nein? Dann steht jetzt eindeutig die sch√∂nste Frau der Welt vor mir!",
      "Ich wei√ü zwar nicht, wer du bist, aber ich glaube, ich w√ºrde es gerne wissen.",
      "Kaufst du mir ein Eis? Du darfst danach auch an mir lecken.",
      "Bist du ein Kater? Weil ich das Gef√ºhl hab, dass ich dich morgen noch sp√ºren werde.",
      "Wenn du ein Cocktail w√§rst, w√§rst du definitiv 'Sex on the Beach'.",
      "Sag mal, tanzen wir jetzt oder warten wir auf den Soundtrack unserer Lovestory?",
      "Du kannst aufh√∂ren zu gucken, ich komm schon von alleine r√ºber",
      "Du siehst aus als wenn du gutes Fr√ºhst√ºck machst, lass uns das testen",
      "Wie hei√üt du oder soll ich dich einfach Schatz nennen",
      "Mein Bett quietscht, willst du es reparieren oder nur mit mir testen?",
      "Ich steh auf ehrliche M√§nner, also: Willst du nur rummachen oder auch mit mir Fr√ºhst√ºcken?",
      "Du siehst aus als h√§ttest du schon mal ein Rohr verlegt, leg mir auch eins.",
      "Wenn du 'ne Pizza w√§rst, w√§r ich der K√§se, der an dir klebt.",
      "Ich bin kein DJ, aber ich leg heute noch bei dir auf.",
      "Bist du Google? Weil du alles hast, wonach ich gesucht hab.",
      "Ich bin vom Gesundheitsamt ‚Äì und du bist eindeutig zu hei√ü!"
    ];

    const shots = [
      "Tequila","J√§germeister","Sambuca","Berliner Luft","Wodka","Kleiner Feigling","Ficken Lik√∂r","Klopfer","Pfeffi","Whiskey","Korn","Underberg","Rum","JACKPOT - such dir was aus","Asbach Uralt","Hierbas","Palo","K√ºmmerling","Baileys","Ouzo","Mexikaner"
    ];

    const wahrheitOderShot = [
      "Mache einem Fremden ein merkw√ºrdiges Kompliment",
      "Gib einem Fremden ein High Five und zieh kurz vorher zur√ºck",
      "Ruf einen beliebigen Kontakt an: Wenn er rangeht, sag dass du gut zuhause angekommen bist, wenn nicht: Shot",
      "Umarme jemanden aus deiner Gruppe (oder einen Fremden) 10 Sekunden lang",
      "Versuch jemanden mit einem Anmachspruch aus dieser Seite anzumachen",
      "Tu so, als w√ºrdest du einen Heiratsantrag machen",
      "Trink aus dem Glas eines Freundes ‚Äì ohne zu fragen.",
      "Sag einer fremden Person, dass du wie ein Promi aussiehst - m√∂glichst absurd.",
      "Stell dich neben eine fremde Gruppe, die nett aussieht und klatsch 10 Sekunden lang - kommentarlos.",
      "Mach einem fremden Mann drei Komplimente √ºber seine Schuhe.",
      "Geh zur Bar (oder irgendeiner Person mit Getr√§nk) und frag, ob du einen \"Probeschluck\" kriegst.",
      "Frag eine fremde Person, ob sie dir ihr Lieblingsgetr√§nk erkl√§rt ‚Äì und tu so, als w√§rst du total beeindruckt.",
      "Erz√§hle einer Fremden Person dass du ein ganz wildes Hobby hast und denk dir was m√∂glichst merkw√ºrdiges aus."
    ];

    // --- Helper: Zufall OHNE unmittelbare Wiederholung ---
    function pickDifferent(arr, last) {
      if (!arr || arr.length === 0) return null;
      if (arr.length === 1) return arr[0];
      let candidate = null; let safety = 0;
      do { candidate = arr[Math.floor(Math.random() * arr.length)]; safety++; } while (candidate === last && safety < 50);
      return candidate;
    }

    // --- State ---
    let lastSpruch = null;
    let lastShot = null;
    let lastTruth = null;
    let spruchClickCount = 0;
    let coachShown = false; // Coach nur einmal nach 10 Spr√ºchen
    let shotClickCount = 0;  // Cheat-Popup bei jedem 5.

    // --- Modal Helpers ---
    function showBackdrop(id){ const b = document.getElementById(id); b.classList.add('show'); }
    function hideBackdrop(id){ const b = document.getElementById(id); b.classList.remove('show'); }

    function showSpruchModal(text){
      const p = document.getElementById('spruch-text');
      p.textContent = '‚Ä¶';
      showBackdrop('spruch-backdrop');
      setTimeout(()=>{ p.textContent = text; document.getElementById('spruch-close').focus(); }, 700);
      if (navigator.vibrate) { try { navigator.vibrate(15); } catch(e){} }
    }
    function closeSpruchModal(){ hideBackdrop('spruch-backdrop'); }

    function showCoachModal(){ showBackdrop('coach-backdrop'); setTimeout(()=>document.getElementById('coach-ok').focus(),0); }
    function closeCoachModal(){ hideBackdrop('coach-backdrop'); }

    function showShotModal(text){
      const p = document.getElementById('shot-text');
      p.textContent = '‚Ä¶';
      showBackdrop('shot-backdrop');
      setTimeout(()=>{ p.textContent = text; document.getElementById('shot-close').focus(); }, 700);
    }
    function closeShotModal(){ hideBackdrop('shot-backdrop'); }

    function showCheatModal(){ showBackdrop('cheat-backdrop'); }
    function closeCheatModal(){ hideBackdrop('cheat-backdrop'); }

    function showTruthModal(text){
      const p = document.getElementById('truth-text');
      p.textContent = '‚Ä¶';
      showBackdrop('truth-backdrop');
      setTimeout(()=>{ p.textContent = text; document.getElementById('truth-close').focus(); }, 700);
    }
    function closeTruthModal(){ hideBackdrop('truth-backdrop'); }

    // --- Actions ---
    function zeigSpruch(){
      spruchClickCount++;
      const btn = document.getElementById('spruch-btn');
      btn.disabled = true;
      if (spruchClickCount > 10 && !coachShown) { coachShown = true; btn.disabled = false; showCoachModal(); return; }
      const final = pickDifferent(sprueche, lastSpruch); lastSpruch = final; showSpruchModal(final); btn.disabled = false;
    }

    function zeigShot(){
      shotClickCount++;
      const btn = document.getElementById('shot-button');
      btn.disabled = true;
      if (shotClickCount % 5 === 0) { btn.disabled = false; showCheatModal(); return; }
      const final = pickDifferent(shots, lastShot); lastShot = final; showShotModal(final); btn.disabled = false;
    }

    function zeigAufgabe(){
      const btn = document.getElementById('truth-btn');
      btn.disabled = true;
      const final = pickDifferent(wahrheitOderShot, lastTruth); lastTruth = final; showTruthModal(final); btn.disabled = false;
    }

    // --- Tests --- (UI-Tests nur manuell; Pure-Tests immer und ohne Popups)
    function runBasicTests(){
      try {
        console.log('[Tests] start');
        // Coach beim 11. Spruch (einmalig)
        spruchClickCount = 0; coachShown = false; for(let i=0;i<10;i++){ zeigSpruch(); }
        zeigSpruch(); if (!coachShown) console.error('Coach modal sollte beim 11. Klick erscheinen');
        // Cheat jeder 5. Shot
        shotClickCount = 0; for(let i=1;i<=10;i++){ zeigShot(); }
        // Truth zieht Aufgabe + zeigt Modal
        lastTruth = null; zeigAufgabe();
        console.log('[Tests] done');
      } catch(e) { console.error('[Tests] failed', e); }
    }

    function runPureTests(){
      try {
        console.log('[PureTests] start');
        let last = 'x';
        for (let i=0; i<100; i++) {
          const v = pickDifferent(['x','y','z'], last);
          if (v === last) console.error('Pure repeat on iteration', i);
          last = v;
        }
        console.log('[PureTests] done');
      } catch(e){ console.error('[PureTests] failed', e); }
    }

    function shouldRunTests(){
      try {
        const url = new URL(window.location.href);
        return url.searchParams.get('test') === '1' || window.location.hash.includes('debug');
      } catch(e){ return false; }
    }

    window.addEventListener('load', () => {
      if (shouldRunTests()) { runBasicTests(); } // UI-Tests nur mit ?test=1 oder #debug
      runPureTests();                             // immer, √∂ffnet keine Popups
    });
  </script>
  <div style="margin-top: 80px;">
  <p style="font-size: 0.9em; color: #666;">üëÄ So viele neugierige Nasen waren schon hier:</p>
  <a href="https://www.hitwebcounter.com" target="_blank">
    <img src="https://hitwebcounter.com/counter/counter.php?page=21288351&style=0006&nbdigits=4&type=page&initCount=0" 
         title="Counter Widget" alt="Visit counter For Websites" border="0" />
  </a>
</div>

</body>
</html>
